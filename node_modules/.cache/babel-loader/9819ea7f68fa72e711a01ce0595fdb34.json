{"remainingRequest":"D:\\广理学习\\JAVA框架项目\\乐字节-云E办\\乐字节-云E办前端\\yeb\\node_modules\\thread-loader\\dist\\cjs.js!D:\\广理学习\\JAVA框架项目\\乐字节-云E办\\乐字节-云E办前端\\yeb\\node_modules\\babel-loader\\lib\\index.js!D:\\广理学习\\JAVA框架项目\\乐字节-云E办\\乐字节-云E办前端\\yeb\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\广理学习\\JAVA框架项目\\乐字节-云E办\\乐字节-云E办前端\\yeb\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\广理学习\\JAVA框架项目\\乐字节-云E办\\乐字节-云E办前端\\yeb\\src\\views\\sys\\SysAdmin.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\广理学习\\JAVA框架项目\\乐字节-云E办\\乐字节-云E办前端\\yeb\\src\\views\\sys\\SysAdmin.vue","mtime":1611658510000},{"path":"D:\\广理学习\\JAVA框架项目\\乐字节-云E办\\乐字节-云E办前端\\yeb\\babel.config.js","mtime":1611658510000},{"path":"D:\\广理学习\\JAVA框架项目\\乐字节-云E办\\乐字节-云E办前端\\yeb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\广理学习\\JAVA框架项目\\乐字节-云E办\\乐字节-云E办前端\\yeb\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\广理学习\\JAVA框架项目\\乐字节-云E办\\乐字节-云E办前端\\yeb\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\广理学习\\JAVA框架项目\\乐字节-云E办\\乐字节-云E办前端\\yeb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\广理学习\\JAVA框架项目\\乐字节-云E办\\乐字节-云E办前端\\yeb\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc3BsaWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJTeXNBZG1pbiIsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGFkbWluczogW10sCiAgICAgIC8vIDMKICAgICAga2V5d29yZHM6ICcnLAogICAgICAvLyA444CB5pCc57Si5YWz6ZSu5a2XCiAgICAgIGFsbFJvbGVzOiBbXSwKICAgICAgLy8gMTjjgIHmm7TmlrDmk43kvZzlkZjop5LoibIKICAgICAgc2VsZWN0ZWRSb2xlczogW10gLy8gMjMKCiAgICB9OwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHRoaXMuaW5pdEFkbWlucygpOyAvLyA1CiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyAyNeOAgeabtOaWsOaTjeS9nOWRmOinkuiJsgogICAgaGlkZVBvcDogZnVuY3Rpb24gaGlkZVBvcChhZG1pbikgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIHJvbGVzID0gW107CiAgICAgIE9iamVjdC5hc3NpZ24ocm9sZXMsIGFkbWluLnJvbGVzKTsgLy8g5ou36LSd5a+56LGhCgogICAgICB2YXIgZmxhZyA9IGZhbHNlOyAvLyDlpoLmnpzpgInkuK3nmoTop5LoibIgaWQg55qE6ZW/5bqm5ZKM5Y6f5p2l55qE5LiN5LiA5qC3CgogICAgICBpZiAocm9sZXMubGVuZ3RoICE9IHRoaXMuc2VsZWN0ZWRSb2xlcy5sZW5ndGgpIHsKICAgICAgICAvLyDnlKjmiLflr7nlupTop5LoibJpZAogICAgICAgIGZsYWcgPSB0cnVlOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIOinkuiJsiBpZCDplb/luqblkozljp/mnaXnmoTkuIDmoLfvvIzkvYblj6/og73op5LoibLkuI3kuIDmoLcKICAgICAgICAvLyDlhYjlvqrnjq8gYWRtaW4ucm9sZXMKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJvbGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICB2YXIgcm9sZSA9IHJvbGVzW2ldOyAvLyDnlKjmiLflr7nlupTnmoTop5LoibLlr7nosaEKCiAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHRoaXMuc2VsZWN0ZWRSb2xlcy5sZW5ndGg7IGorKykgewogICAgICAgICAgICB2YXIgc3IgPSB0aGlzLnNlbGVjdGVkUm9sZXNbal07IC8vIOaLv+WIsOeUqOaIt+WvueW6lOeahOinkuiJsuWvueixoeeahGlkCgogICAgICAgICAgICBpZiAocm9sZS5pZCA9PSBzcikgewogICAgICAgICAgICAgIC8vIOinkuiJsuS4gOagtwogICAgICAgICAgICAgIHJvbGVzLnNwbGljZShpLCAxKTsgLy8g5Yig6ZmkCgogICAgICAgICAgICAgIGktLTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKHJvbGVzLmxlbmd0aCAhPSAwKSB7CiAgICAgICAgICBmbGFnID0gdHJ1ZTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmIChmbGFnKSB7CiAgICAgICAgLy8g5ou85o6lIHVybCjlj4LmlbDkuLogYWRtaW5JZOOAgeinkuiJsiByaWRzICkKICAgICAgICB2YXIgdXJsID0gJy9zeXN0ZW0vYWRtaW4vcm9sZT9hZG1pbklkPScgKyBhZG1pbi5pZDsKICAgICAgICB0aGlzLnNlbGVjdGVkUm9sZXMuZm9yRWFjaChmdW5jdGlvbiAoc3IpIHsKICAgICAgICAgIHVybCArPSAnJnJpZHM9JyArIHNyOwogICAgICAgIH0pOwogICAgICAgIHRoaXMucHV0UmVxdWVzdCh1cmwpLnRoZW4oZnVuY3Rpb24gKHJlc3ApIHsKICAgICAgICAgIGlmIChyZXNwKSB7CiAgICAgICAgICAgIF90aGlzLmluaXRBZG1pbnMoKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIC8vIDIx44CB5LiL5ouJ5qGG6I635Y+W5omA5pyJ55So5oi36KeS6ImyCiAgICBzaG93UG9wOiBmdW5jdGlvbiBzaG93UG9wKGFkbWluKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdGhpcy5pbml0QWxsUm9sZXMoKTsKICAgICAgdmFyIHJvbGVzID0gYWRtaW4ucm9sZXM7IC8vIOaLv+WIsOaVtOS4quaVsOe7hAoKICAgICAgdGhpcy5zZWxlY3RlZFJvbGVzID0gW107CiAgICAgIHJvbGVzLmZvckVhY2goZnVuY3Rpb24gKHIpIHsKICAgICAgICBfdGhpczIuc2VsZWN0ZWRSb2xlcy5wdXNoKHIuaWQpOyAvLyByLmlkIOebuOWQjOeahOinkuiJsuaUvui/m+aVsOe7hAoKICAgICAgfSk7CiAgICB9LAogICAgLy8gMTnjgIHojrflj5bmiYDmnInmk43kvZzlkZgKICAgIGluaXRBbGxSb2xlczogZnVuY3Rpb24gaW5pdEFsbFJvbGVzKCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHRoaXMuZ2V0UmVxdWVzdCgnIC9zeXN0ZW0vYWRtaW4vcm9sZXMnKS50aGVuKGZ1bmN0aW9uIChyZXNwKSB7CiAgICAgICAgaWYgKHJlc3ApIHsKICAgICAgICAgIF90aGlzMy5hbGxSb2xlcyA9IHJlc3A7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICAvLyAxNeOAgeabtOaWsOaTjeS9nOWRmAogICAgZW5hYmxlZENoYW5nZTogZnVuY3Rpb24gZW5hYmxlZENoYW5nZShhZG1pbikgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgIHRoaXMucHV0UmVxdWVzdCgnL3N5c3RlbS9hZG1pbi8nLCBhZG1pbikudGhlbihmdW5jdGlvbiAocmVzcCkgewogICAgICAgIGlmIChyZXNwKSB7CiAgICAgICAgICBfdGhpczQuaW5pdEFkbWlucygpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgLy8gMTPjgIHliKDpmaTmk43kvZzlkZgKICAgIGRlbGV0ZUFkbWluOiBmdW5jdGlvbiBkZWxldGVBZG1pbihhZG1pbikgewogICAgICB2YXIgX3RoaXM1ID0gdGhpczsKCiAgICAgIHRoaXMuJGNvbmZpcm0oJ+atpOaTjeS9nOWwhuawuOS5heWIoOmZpOivpVsnICsgYWRtaW4ubmFtZSArICddLCDmmK/lkKbnu6fnu60/JywgJ+aPkOekuicsIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsCiAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzNS5kZWxldGVSZXF1ZXN0KCcvc3lzdGVtL2FkbWluLycgKyBhZG1pbi5pZCkudGhlbihmdW5jdGlvbiAocmVzcCkgewogICAgICAgICAgaWYgKHJlc3ApIHsKICAgICAgICAgICAgX3RoaXM1LmluaXRBZG1pbnMoKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzNS4kbWVzc2FnZSh7CiAgICAgICAgICB0eXBlOiAnaW5mbycsCiAgICAgICAgICBtZXNzYWdlOiAn5bey5Y+W5raI5Yig6ZmkJwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICAvLyAxMCDmkJzntKIKICAgIGRvU2VhcmNoOiBmdW5jdGlvbiBkb1NlYXJjaCgpIHsKICAgICAgdGhpcy5pbml0QWRtaW5zKCk7CiAgICB9LAogICAgLy8gNOOAgeiOt+WPluaJgOacieaTjeS9nOWRmO+8mzEx44CB5Yqg5Y+C5pWw5YWz6ZSu5a2XCiAgICBpbml0QWRtaW5zOiBmdW5jdGlvbiBpbml0QWRtaW5zKCkgewogICAgICB2YXIgX3RoaXM2ID0gdGhpczsKCiAgICAgIHRoaXMuZ2V0UmVxdWVzdCgnL3N5c3RlbS9hZG1pbi8/a2V5d29yZHM9JyArIHRoaXMua2V5d29yZHMpLnRoZW4oZnVuY3Rpb24gKHJlc3ApIHsKICAgICAgICBpZiAocmVzcCkgewogICAgICAgICAgX3RoaXM2LmFkbWlucyA9IHJlc3A7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2EA;AACAA,kBADA;AAEAC,MAFA,kBAEA;AACA;AACAC,gBADA;AACA;AACAC,kBAFA;AAEA;AACAC,kBAHA;AAGA;AACAC,uBAJA,CAIA;;AAJA;AAMA,GATA;AAUAC,SAVA,qBAUA;AACA,sBADA,CACA;AACA,GAZA;AAaAC;AACA;AACAC,WAFA,mBAEAC,KAFA,EAEA;AAAA;;AACA;AACAC,wCAFA,CAEA;;AACA,uBAHA,CAIA;;AACA;AAAA;AACAC;AACA,OAFA,MAEA;AACA;AACA;AACA;AACA,8BADA,CACA;;AACA;AACA,2CADA,CACA;;AACA;AAAA;AACAC,iCADA,CACA;;AACAC;AACA;AACA;AACA;AACA;;AACA;AACAF;AACA;AACA;;AACA;AACA;AACA;AACA;AACAG;AACA,SAFA;AAGA;AACA;AACA;AACA;AACA,SAJA;AAKA;AACA,KAvCA;AAwCA;AACAC,WAzCA,mBAyCAN,KAzCA,EAyCA;AAAA;;AACA;AACA,8BAFA,CAEA;;AACA;AACAG;AACA,wCADA,CACA;;AACA,OAFA;AAGA,KAhDA;AAiDA;AACAI,gBAlDA,0BAkDA;AAAA;;AACA;AACA;AACA;AACA;AACA,OAJA;AAKA,KAxDA;AAyDA;AACAC,iBA1DA,yBA0DAR,KA1DA,EA0DA;AAAA;;AACA;AACA;AACA;AACA;AACA,OAJA;AAKA,KAhEA;AAiEA;AACAS,eAlEA,uBAkEAT,KAlEA,EAkEA;AAAA;;AACA;AACAU,+BADA;AAEAC,8BAFA;AAGAC;AAHA,SAIAC,IAJA,CAIA;AACA;AACA;AACA;AACA;AACA,SAJA;AAKA,OAVA,EAUAC,KAVA,CAUA;AACA;AACAF,sBADA;AAEAG;AAFA;AAIA,OAfA;AAgBA,KAnFA;AAoFA;AACAC,YArFA,sBAqFA;AACA;AACA,KAvFA;AAwFA;AACAC,cAzFA,wBAyFA;AAAA;;AACA;AACA;AACA;AACA;AACA,OAJA;AAKA;AA/FA;AAbA","names":["name","data","admins","keywords","allRoles","selectedRoles","mounted","methods","hidePop","admin","Object","flag","roles","i","url","showPop","initAllRoles","enabledChange","deleteAdmin","confirmButtonText","cancelButtonText","type","then","catch","message","doSearch","initAdmins"],"sourceRoot":"src/views/sys","sources":["SysAdmin.vue"],"sourcesContent":["<template>\n  <div>\n    <!-- 1、 -->\n    <div style=\"display: flex;justify-content: center;margin-top: 10px;\">\n      <!-- 9、v-model=\"keywords\" \\ @click=\"doSearch\">搜索 -->\n      <el-input v-model=\"keywords\" placeholder=\"通过用户名搜索用户...\" prefix-icon=\"el-icon-search\"\n                style=\"width: 400px;margin-right: 10px;\"></el-input>\n      <el-button type=\"primary\" icon=\"el-icon-search\" @click=\"doSearch\">搜索</el-button>\n    </div>\n    <!-- 2、6、 -->\n    <div class=\"admin-container\">\n      <el-card class=\"admin-card\" v-for=\"(admin,index) in admins\" :key=\"index\">\n        <div slot=\"header\" class=\"clearfix\">\n          <span>{{ admin.name }}</span>\n          <!-- 12、 @click=\"deleteAdmin(admin)\" -->\n          <el-button style=\"float: right; padding: 3px 0;color:red;\" type=\"text\" icon=\"el-icon-delete\"\n                     @click=\"deleteAdmin(admin)\"></el-button>\n        </div>\n        <div>\n          <div class=\"img-container\">\n            <img :src=\"admin.userFace\" :alt=\"admin.name\" :title=\"admin.name\" class=\"userFace-img\">\n          </div>\n        </div>\n        <div class=\"userinfo-container\">\n          <div>用户名：{{ admin.name }}</div>\n          <div>手机号码：{{ admin.phone }}</div>\n          <div>电话号码：{{ admin.telephone }}</div>\n          <div>地址：{{ admin.address }}</div>\n          <div>用户状态：\n            <!-- 14、更新操作员 @change=\"enabledChange(admin)\" -->\n            <el-switch\n                v-model=\"admin.enabled\"\n                active-color=\"#13ce66\"\n                inactive-color=\"#ff4949\"\n                @change=\"enabledChange(admin)\"\n                active-text=\"启用\"\n                inactive-text=\"禁用\">\n            </el-switch>\n          </div>\n          <div>\n            用户角色：\n            <el-tag style=\"margin-right: 4px;\" type=\"success\" v-for=\"(role,index) in admin.roles\" :key=\"index\">\n              {{ role.nameZh }}\n            </el-tag>\n            <!-- 16、更新操作员角色 弹出框、选择器、 -->\n            <!-- 20、@show=\"showPop(admin)\" -->\n            <!-- 24、@hide=\"hidePop(admin)\" hide 隐藏时触发-->\n            <el-popover\n                placement=\"right\"\n                title=\"角色列表\"\n                width=\"200\"\n                @show=\"showPop(admin)\"\n                @hide=\"hidePop(admin)\"\n                trigger=\"click\">\n              <!-- 17、更新操作员角色 下拉框 -->\n              <!-- 22、v-model=\"selectedRoles\" 存的是1个角色id，multiple 多选，显示已有角色 -->\n              <el-select v-model=\"selectedRoles\" multiple placeholder=\"请选择\">\n                <el-option\n                    v-for=\"(r,index) in allRoles\"\n                    :key=\"index\"\n                    :label=\"r.nameZh\"\n                    :value=\"r.id\">\n                </el-option>\n              </el-select>\n              <!-- 3个点按钮 ... -->\n              <el-button slot=\"reference\" type=\"text\" icon=\"el-icon-more\"></el-button>\n            </el-popover>\n          </div>\n          <div>备注：{{ admin.remark }}</div>\n        </div>\n      </el-card>\n    </div>\n  </div>\n</template>\n<script>\nexport default {\n  name: \"SysAdmin\",\n  data() {\n    return {\n      admins: [], // 3\n      keywords: '', // 8、搜索关键字\n      allRoles: [], // 18、更新操作员角色\n      selectedRoles: [] // 23\n    }\n  },\n  mounted() {\n    this.initAdmins() // 5\n  },\n  methods: {\n    // 25、更新操作员角色\n    hidePop(admin) {\n      let roles = []\n      Object.assign(roles, admin.roles) // 拷贝对象\n      let flag = false\n      // 如果选中的角色 id 的长度和原来的不一样\n      if (roles.length != this.selectedRoles.length) { // 用户对应角色id\n        flag = true\n      } else {\n        // 角色 id 长度和原来的一样，但可能角色不一样\n        // 先循环 admin.roles\n        for (let i = 0; i < roles.length; i++) {\n          let role = roles[i] // 用户对应的角色对象\n          for (let j = 0; j < this.selectedRoles.length; j++) {\n            let sr = this.selectedRoles[j]  // 拿到用户对应的角色对象的id\n            if (role.id == sr) { // 角色一样\n              roles.splice(i, 1) // 删除\n              i--\n              break\n            }\n          }\n        }\n        if (roles.length != 0) {\n          flag = true\n        }\n      }\n      if (flag) {\n        // 拼接 url(参数为 adminId、角色 rids )\n        let url = '/system/admin/role?adminId=' + admin.id;\n        this.selectedRoles.forEach(sr => {\n          url += '&rids=' + sr\n        });\n        this.putRequest(url).then(resp => {\n          if (resp) {\n            this.initAdmins()\n          }\n        });\n      }\n    },\n    // 21、下拉框获取所有用户角色\n    showPop(admin) {\n      this.initAllRoles()\n      let roles = admin.roles // 拿到整个数组\n      this.selectedRoles = []\n      roles.forEach(r => {\n        this.selectedRoles.push(r.id) // r.id 相同的角色放进数组\n      })\n    },\n    // 19、获取所有操作员\n    initAllRoles() {\n      this.getRequest(' /system/admin/roles').then(resp => {\n        if (resp) {\n          this.allRoles = resp\n        }\n      })\n    },\n    // 15、更新操作员\n    enabledChange(admin) {\n      this.putRequest('/system/admin/', admin).then(resp => {\n        if (resp) {\n          this.initAdmins()\n        }\n      })\n    },\n    // 13、删除操作员\n    deleteAdmin(admin) {\n      this.$confirm('此操作将永久删除该[' + admin.name + '], 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        this.deleteRequest('/system/admin/' + admin.id).then(resp => {\n          if (resp) {\n            this.initAdmins()\n          }\n        })\n      }).catch(() => {\n        this.$message({\n          type: 'info',\n          message: '已取消删除'\n        });\n      });\n    },\n    // 10 搜索\n    doSearch() {\n      this.initAdmins()\n    },\n    // 4、获取所有操作员；11、加参数关键字\n    initAdmins() {\n      this.getRequest('/system/admin/?keywords=' + this.keywords).then(resp => {\n        if (resp) {\n          this.admins = resp\n        }\n      })\n    }\n  }\n}\n</script>\n\n<style>\n/* 7 */\n.admin-container {\n  margin-top: 10px;\n  display: flex;\n  justify-content: space-around; /* 在弹性盒对象的 <div> 元素中的各项周围留有空白：*/\n  flex-wrap: wrap; /* 自动换行 */\n}\n\n.admin-card {\n  width: 350px;\n  margin-bottom: 20px;\n}\n\n.userFace-img {\n  width: 72px;\n  height: 72px;\n  border-radius: 72px;\n}\n\n/* 头像居中 */\n.img-container {\n  width: 100%;\n  display: flex;\n  justify-content: center;\n}\n\n.userinfo-container {\n  font-size: 12px;\n  color: #3e9ef5;\n}\n</style>\n"]}]}