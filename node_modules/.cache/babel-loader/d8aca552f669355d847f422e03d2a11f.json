{"remainingRequest":"D:\\广理学习\\JAVA框架项目\\乐字节-云E办\\乐字节-云E办前端\\yeb\\node_modules\\thread-loader\\dist\\cjs.js!D:\\广理学习\\JAVA框架项目\\乐字节-云E办\\乐字节-云E办前端\\yeb\\node_modules\\babel-loader\\lib\\index.js!D:\\广理学习\\JAVA框架项目\\乐字节-云E办\\乐字节-云E办前端\\yeb\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\广理学习\\JAVA框架项目\\乐字节-云E办\\乐字节-云E办前端\\yeb\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\广理学习\\JAVA框架项目\\乐字节-云E办\\乐字节-云E办前端\\yeb\\src\\views\\AdminInfo.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\广理学习\\JAVA框架项目\\乐字节-云E办\\乐字节-云E办前端\\yeb\\src\\views\\AdminInfo.vue","mtime":1611658510000},{"path":"D:\\广理学习\\JAVA框架项目\\乐字节-云E办\\乐字节-云E办前端\\yeb\\babel.config.js","mtime":1611658510000},{"path":"D:\\广理学习\\JAVA框架项目\\乐字节-云E办\\乐字节-云E办前端\\yeb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\广理学习\\JAVA框架项目\\乐字节-云E办\\乐字节-云E办前端\\yeb\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\广理学习\\JAVA框架项目\\乐字节-云E办\\乐字节-云E办前端\\yeb\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\广理学习\\JAVA框架项目\\乐字节-云E办\\乐字节-云E办前端\\yeb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\广理学习\\JAVA框架项目\\乐字节-云E办\\乐字节-云E办前端\\yeb\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZXJyb3IuY2F1c2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5yZXBsYWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuanNvbi5zdHJpbmdpZnkuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkFkbWluSW5mbyIsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgLy8gMi01IOS/ruaUueWvhueggeagoemqjOinhOWImSDkuIDlrpropoHmlL7mnIDliY3pnaIKICAgIHZhciB2YWxpZGF0ZVBhc3MgPSBmdW5jdGlvbiB2YWxpZGF0ZVBhc3MocnVsZSwgdmFsdWUsIGNhbGxiYWNrKSB7CiAgICAgIGlmICh2YWx1ZSA9PT0gJycpIHsKICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoJ+ivt+i+k+WFpeWvhueggScpKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAoX3RoaXMucnVsZUZvcm0uY2hlY2tQYXNzICE9PSAnJykgewogICAgICAgICAgX3RoaXMuJHJlZnMucnVsZUZvcm0udmFsaWRhdGVGaWVsZCgnY2hlY2tQYXNzJyk7CiAgICAgICAgfQoKICAgICAgICBjYWxsYmFjaygpOwogICAgICB9CiAgICB9OwoKICAgIHZhciB2YWxpZGF0ZVBhc3MyID0gZnVuY3Rpb24gdmFsaWRhdGVQYXNzMihydWxlLCB2YWx1ZSwgY2FsbGJhY2spIHsKICAgICAgaWYgKHZhbHVlID09PSAnJykgewogICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcign6K+35YaN5qyh6L6T5YWl5a+G56CBJykpOwogICAgICB9IGVsc2UgaWYgKHZhbHVlICE9PSBfdGhpcy5ydWxlRm9ybS5wYXNzKSB7CiAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCfkuKTmrKHovpPlhaXlr4bnoIHkuI3kuIDoh7QhJykpOwogICAgICB9IGVsc2UgewogICAgICAgIGNhbGxiYWNrKCk7CiAgICAgIH0KICAgIH07CgogICAgcmV0dXJuIHsKICAgICAgYWRtaW46IG51bGwsCiAgICAgIGFkbWluMjogbnVsbCwKICAgICAgLy8gMS01IOe8lui+keeahOWvueixoQogICAgICBkaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgICAgLy8gMS0yIOe8lui+keeUqOaIt+S/oeaBrwogICAgICBwYXNzd29yZERpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICAvLyAyLTMg5L+u5pS55a+G56CBCiAgICAgIHJ1bGVGb3JtOiB7CiAgICAgICAgLy8gMi02IOagoemqjOWvueixoSDop4TliJkKICAgICAgICBwYXNzOiAnJywKICAgICAgICBjaGVja1Bhc3M6ICcnLAogICAgICAgIG9sZFBhc3M6ICcnIC8vIDItOQoKICAgICAgfSwKICAgICAgcnVsZXM6IHsKICAgICAgICBwYXNzOiBbewogICAgICAgICAgdmFsaWRhdG9yOiB2YWxpZGF0ZVBhc3MsCiAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICB9XSwKICAgICAgICBjaGVja1Bhc3M6IFt7CiAgICAgICAgICB2YWxpZGF0b3I6IHZhbGlkYXRlUGFzczIsCiAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICB9XSwKICAgICAgICBvbGRQYXNzOiBbewogICAgICAgICAgdmFsaWRhdG9yOiB2YWxpZGF0ZVBhc3MsCiAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICB9XQogICAgICB9CiAgICB9OwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHRoaXMuaW5pdEFkbWluKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyAyLTcg6aKE5qCh6aqMIOaPkOS6pOihqOWNlQogICAgc3VibWl0Rm9ybTogZnVuY3Rpb24gc3VibWl0Rm9ybShmb3JtTmFtZSkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHRoaXMuJHJlZnNbZm9ybU5hbWVdLnZhbGlkYXRlKGZ1bmN0aW9uICh2YWxpZCkgewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgLy8gYWxlcnQoJ3N1Ym1pdCEnKTsKICAgICAgICAgIF90aGlzMi5ydWxlRm9ybS5hZG1pbklkID0gX3RoaXMyLmFkbWluLmlkOwoKICAgICAgICAgIF90aGlzMi5wdXRSZXF1ZXN0KCcvYWRtaW4vcGFzcycsIF90aGlzMi5ydWxlRm9ybSkudGhlbihmdW5jdGlvbiAocmVzcCkgewogICAgICAgICAgICBpZiAocmVzcCkgewogICAgICAgICAgICAgIC8vIOabtOaWsOWvhueggeaIkOWKn+WQjiDpgIDlh7rnmbvlvZUKICAgICAgICAgICAgICBfdGhpczIucG9zdFJlcXVlc3QoJy9sb2dvdXQnKTsgLy8g6YCA5Ye655m75b2VCgoKICAgICAgICAgICAgICB3aW5kb3cuc2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbSgndXNlcicpOwogICAgICAgICAgICAgIHdpbmRvdy5zZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKCd0b2tlblN0cicpOwoKICAgICAgICAgICAgICBfdGhpczIuJHN0b3JlLmNvbW1pdCgnaW5pdFJvdXRlcycsIFtdKTsgLy8g5Yid5aeL5YyW6Lev55SxIOiPnOWNlSDnva7nqboKCgogICAgICAgICAgICAgIF90aGlzMi4kcm91dGVyLnJlcGxhY2UoJy8nKTsgLy8g6Lez5Yiw55m75b2V6aG16Z2iCgogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY29uc29sZS5sb2coJ2Vycm9yIHN1Ym1pdCEhJyk7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICAvLyAyLTcg6YeN5Zu05L+u5pS55a+G56CB6KGo5Y2VCiAgICByZXNldEZvcm06IGZ1bmN0aW9uIHJlc2V0Rm9ybShmb3JtTmFtZSkgewogICAgICB0aGlzLiRyZWZzW2Zvcm1OYW1lXS5yZXNldEZpZWxkcygpOwogICAgfSwKICAgIC8vIDItNCDkv67mlLnlr4bnoIEKICAgIHNob3dVcGRhdGVQYXNzd29yZFZpZXc6IGZ1bmN0aW9uIHNob3dVcGRhdGVQYXNzd29yZFZpZXcoKSB7CiAgICAgIHRoaXMucGFzc3dvcmREaWFsb2dWaXNpYmxlID0gdHJ1ZTsKICAgIH0sCiAgICAvLyAxLTkg5pu05paw55So5oi3CiAgICB1cGRhdGVBZG1pbkluZm86IGZ1bmN0aW9uIHVwZGF0ZUFkbWluSW5mbygpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICB0aGlzLnB1dFJlcXVlc3QoJy9hZG1pbi9pbmZvJywgdGhpcy5hZG1pbjIpLnRoZW4oZnVuY3Rpb24gKHJlc3ApIHsKICAgICAgICBpZiAocmVzcCkgewogICAgICAgICAgX3RoaXMzLmRpYWxvZ1Zpc2libGUgPSBmYWxzZTsKCiAgICAgICAgICBfdGhpczMuaW5pdEFkbWluKCk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICAvLyAxLTQg57yW6L6R55So5oi35L+h5oGv5by55qGGCiAgICBzaG93VXBkYXRlQWRtaW5JbmZvVmlldzogZnVuY3Rpb24gc2hvd1VwZGF0ZUFkbWluSW5mb1ZpZXcoKSB7CiAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IHRydWU7CiAgICB9LAogICAgaW5pdEFkbWluOiBmdW5jdGlvbiBpbml0QWRtaW4oKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgdGhpcy5nZXRSZXF1ZXN0KCcvYWRtaW4vaW5mbycpLnRoZW4oZnVuY3Rpb24gKHJlc3ApIHsKICAgICAgICBpZiAocmVzcCkgewogICAgICAgICAgX3RoaXM0LmFkbWluID0gcmVzcDsKICAgICAgICAgIF90aGlzNC5hZG1pbjIgPSBPYmplY3QuYXNzaWduKHt9LCBfdGhpczQuYWRtaW4pOyAvLyAxLTYg5a+56LGh5ou36LSd57uZIGFkbWluMgoKICAgICAgICAgIHdpbmRvdy5zZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCd1c2VyJywgSlNPTi5zdHJpbmdpZnkocmVzcCkpOwoKICAgICAgICAgIF90aGlzNC4kc3RvcmUuY29tbWl0KCdJTklUX0FETUlOJywgcmVzcCk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmGA;AACAA,mBADA;AAEAC,MAFA,kBAEA;AAAA;;AACA;AACA;AACA;AACAC;AACA,OAFA,MAEA;AACA;AACA;AACA;;AACAA;AACA;AACA,KATA;;AAUA;AACA;AACAA;AACA,OAFA,MAEA;AACAA;AACA,OAFA,MAEA;AACAA;AACA;AACA,KARA;;AAUA;AACAC,iBADA;AAEAC,kBAFA;AAEA;AACAC,0BAHA;AAGA;AACAC,kCAJA;AAIA;AAEAC;AAAA;AACAC,gBADA;AAEAC,qBAFA;AAGAC,mBAHA,CAGA;;AAHA,OANA;AAWAC;AACAH,eACA;AAAAI;AAAAC;AAAA,SADA,CADA;AAIAJ,oBACA;AAAAG;AAAAC;AAAA,SADA,CAJA;AAOAH,kBACA;AAAAE;AAAAC;AAAA,SADA;AAPA;AAXA;AAuBA,GA/CA;AAgDAC,SAhDA,qBAgDA;AACA;AACA,GAlDA;AAmDAC;AACA;AACAC,cAFA,sBAEAC,QAFA,EAEA;AAAA;;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA,4CAFA,CAEA;;;AACAC;AACAA;;AACA,qDALA,CAKA;;;AACA,0CANA,CAMA;;AAEA;AACA,WAVA;AAWA,SAdA,MAcA;AACAC;AACA;AACA;AACA,OAnBA;AAoBA,KAvBA;AAwBA;AACAC,aAzBA,qBAyBAH,QAzBA,EAyBA;AACA;AACA,KA3BA;AA4BA;AACAI,0BA7BA,oCA6BA;AACA;AACA,KA/BA;AAgCA;AACAC,mBAjCA,6BAiCA;AAAA;;AACA;AACA;AACA;;AACA;AACA;AACA,OALA;AAMA,KAxCA;AAyCA;AACAC,2BA1CA,qCA0CA;AACA;AACA,KA5CA;AA6CAC,aA7CA,uBA6CA;AAAA;;AACA;AACA;AACA;AACA,0DAFA,CAEA;;AACAN;;AACA;AACA;AACA,OAPA;AAQA;AAtDA;AAnDA","names":["name","data","callback","admin","admin2","dialogVisible","passwordDialogVisible","ruleForm","pass","checkPass","oldPass","rules","validator","trigger","mounted","methods","submitForm","formName","window","console","resetForm","showUpdatePasswordView","updateAdminInfo","showUpdateAdminInfoView","initAdmin"],"sourceRoot":"src/views","sources":["AdminInfo.vue"],"sourcesContent":["<template>\n  <div>\n    <el-card class=\"box-card\" style=\"width: 400px;\">\n      <div slot=\"header\" class=\"clearfix\">\n        <span>{{ admin.name }}</span>\n      </div>\n      <div>\n        <div>\n          <div style=\"display: flex;justify-content: center;\">\n            <img title=\"点击修改用户头像\" :src=\"admin.userFace\" style=\"height: 100px;width: 100px;border-radius: 50px;\" alt=\"\">\n          </div>\n          <div>电话号码：\n            <el-tag>{{ admin.telephone }}</el-tag>\n          </div>\n          <div>手机号码：\n            <el-tag>{{ admin.phone }}</el-tag>\n          </div>\n          <div>居住地址：\n            <el-tag>{{ admin.address }}</el-tag>\n          </div>\n          <div>用户标签：\n            <el-tag type=\"success\" v-for=\"(r,index) in admin.roles\" :key=\"index\">{{ r.nameZh }}</el-tag>\n          </div>\n        </div>\n        <div style=\"display: flex;justify-content: space-around;margin-top: 10px;\">\n          <!-- 1-3 @click=\"showUpdateAdminInfoView\" -->\n          <el-button type=\"primary\" size=\"mini\" @click=\"showUpdateAdminInfoView\">修改信息</el-button>\n          <!-- 2-1 用户修改密码 @click=\"showUpdatePasswordView\"  -->\n          <el-button type=\"danger\" size=\"mini\" @click=\"showUpdatePasswordView\">修改密码</el-button>\n        </div>\n      </div>\n    </el-card>\n    <!-- 1-1 编辑用户信息 -->\n    <el-dialog\n        title=\"编辑用户信息\"\n        :visible.sync=\"dialogVisible\"\n        width=\"30%\">\n      <div>\n        <table>\n          <tr>\n            <td>用户昵称：</td>\n            <td>\n              <!-- 1-5 重新给每项赋值 admin2 -->\n              <el-input v-model=\"admin2.name\"></el-input>\n            </td>\n          </tr>\n          <tr>\n            <td>电话号码：</td>\n            <td>\n              <el-input v-model=\"admin2.telephone\"></el-input>\n            </td>\n          </tr>\n          <tr>\n            <td>手机号码：</td>\n            <td>\n              <el-input v-model=\"admin2.phone\"></el-input>\n            </td>\n          </tr>\n          <tr>\n            <td>用户地址：</td>\n            <td>\n              <el-input v-model=\"admin2.address\"></el-input>\n            </td>\n          </tr>\n        </table>\n      </div>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogVisible = false\">取 消</el-button>\n        <!-- 1-8 @click=\"updateAdminInfo\" -->\n        <el-button type=\"primary\" @click=\"updateAdminInfo\">确 定</el-button>\n      </span>\n    </el-dialog>\n    <!-- 2-2 修改密码 -->\n    <el-dialog\n        title=\"更新密码\"\n        :visible.sync=\"passwordDialogVisible\"\n        width=\"30%\">\n      <div>\n        <!-- 2-8 调整修改密码表单 -->\n        <el-form :model=\"ruleForm\" status-icon :rules=\"rules\" ref=\"ruleForm\" label-width=\"100px\" class=\"demo-ruleForm\">\n          <el-form-item label=\"请输入旧密码\" prop=\"oldPass\">\n            <el-input type=\"password\" v-model=\"ruleForm.oldPass\" autocomplete=\"off\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"请输入新密码\" prop=\"pass\">\n            <el-input type=\"password\" v-model=\"ruleForm.pass\" autocomplete=\"off\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"确认新密码\" prop=\"checkPass\">\n            <el-input type=\"password\" v-model=\"ruleForm.checkPass\" autocomplete=\"off\"></el-input>\n          </el-form-item>\n          <el-form-item>\n            <el-button type=\"primary\" @click=\"submitForm('ruleForm')\">提交</el-button>\n            <el-button @click=\"resetForm('ruleForm')\">重置</el-button>\n          </el-form-item>\n        </el-form>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n<script>\nexport default {\n  name: \"AdminInfo\",\n  data() {\n    // 2-5 修改密码校验规则 一定要放最前面\n    var validatePass = (rule, value, callback) => {\n      if (value === '') {\n        callback(new Error('请输入密码'));\n      } else {\n        if (this.ruleForm.checkPass !== '') {\n          this.$refs.ruleForm.validateField('checkPass');\n        }\n        callback();\n      }\n    }\n    var validatePass2 = (rule, value, callback) => {\n      if (value === '') {\n        callback(new Error('请再次输入密码'));\n      } else if (value !== this.ruleForm.pass) {\n        callback(new Error('两次输入密码不一致!'));\n      } else {\n        callback();\n      }\n    }\n\n    return {\n      admin: null,\n      admin2: null, // 1-5 编辑的对象\n      dialogVisible: false, // 1-2 编辑用户信息\n      passwordDialogVisible: false, // 2-3 修改密码\n\n      ruleForm: { // 2-6 校验对象 规则\n        pass: '',\n        checkPass: '',\n        oldPass: '', // 2-9\n      },\n      rules: {\n        pass: [\n          {validator: validatePass, trigger: 'blur'}\n        ],\n        checkPass: [\n          {validator: validatePass2, trigger: 'blur'}\n        ],\n        oldPass: [\n          {validator: validatePass, trigger: 'blur'}\n        ]\n      }\n    }\n  },\n  mounted() {\n    this.initAdmin()\n  },\n  methods: {\n    // 2-7 预校验 提交表单\n    submitForm(formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          // alert('submit!');\n          this.ruleForm.adminId = this.admin.id\n          this.putRequest('/admin/pass', this.ruleForm).then(resp => {\n            if (resp) {\n              // 更新密码成功后 退出登录\n              this.postRequest('/logout') // 退出登录\n              window.sessionStorage.removeItem('user')\n              window.sessionStorage.removeItem('tokenStr')\n              this.$store.commit('initRoutes', []) // 初始化路由 菜单 置空\n              this.$router.replace('/') // 跳到登录页面\n\n            }\n          })\n        } else {\n          console.log('error submit!!');\n          return false;\n        }\n      });\n    },\n    // 2-7 重围修改密码表单\n    resetForm(formName) {\n      this.$refs[formName].resetFields();\n    },\n    // 2-4 修改密码\n    showUpdatePasswordView() {\n      this.passwordDialogVisible = true\n    },\n    // 1-9 更新用户\n    updateAdminInfo() {\n      this.putRequest('/admin/info', this.admin2).then(resp => {\n        if (resp) {\n          this.dialogVisible = false\n          this.initAdmin()\n        }\n      })\n    },\n    // 1-4 编辑用户信息弹框\n    showUpdateAdminInfoView() {\n      this.dialogVisible = true\n    },\n    initAdmin() {\n      this.getRequest('/admin/info').then(resp => {\n        if (resp) {\n          this.admin = resp\n          this.admin2 = Object.assign({}, this.admin) // 1-6 对象拷贝给 admin2\n          window.sessionStorage.setItem('user', JSON.stringify(resp))\n          this.$store.commit('INIT_ADMIN', resp)\n        }\n      })\n    }\n  }\n}\n</script>\n\n<style scoped>\n\n</style>\n"]}]}