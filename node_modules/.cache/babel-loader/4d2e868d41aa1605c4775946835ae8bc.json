{"remainingRequest":"D:\\广理学习\\JAVA框架项目\\乐字节-云E办\\乐字节-云E办前端\\yeb\\node_modules\\babel-loader\\lib\\index.js!D:\\广理学习\\JAVA框架项目\\乐字节-云E办\\乐字节-云E办前端\\yeb\\src\\utils\\menus.js","dependencies":[{"path":"D:\\广理学习\\JAVA框架项目\\乐字节-云E办\\乐字节-云E办前端\\yeb\\src\\utils\\menus.js","mtime":1611658510000},{"path":"D:\\广理学习\\JAVA框架项目\\乐字节-云E办\\乐字节-云E办前端\\yeb\\babel.config.js","mtime":1611658510000},{"path":"D:\\广理学习\\JAVA框架项目\\乐字节-云E办\\乐字节-云E办前端\\yeb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\广理学习\\JAVA框架项目\\乐字节-云E办\\乐字节-云E办前端\\yeb\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnN0YXJ0cy13aXRoLmpzIjsKaW1wb3J0IHsgZ2V0UmVxdWVzdCB9IGZyb20gIkAvdXRpbHMvYXBpIjsgLy8g6I+c5Y2V6K+35rGC5bel5YW357G7Ci8vIHJvdXRlciDot6/nlLHvvJsgc3RvcmUgVnVleAoKZXhwb3J0IHZhciBpbml0TWVudSA9IGZ1bmN0aW9uIGluaXRNZW51KHJvdXRlciwgc3RvcmUpIHsKICAvLyDlpoLmnpzmnInmlbDmja7vvIzliJ3lp4vljJbot6/nlLHoj5zljZUKICBpZiAoc3RvcmUuc3RhdGUucm91dGVzLmxlbmd0aCA+IDApIHsKICAgIHJldHVybjsKICB9CgogIGdldFJlcXVlc3QoJy9zeXN0ZW0vY29uZmlnL21lbnUnKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAvLyDlpoLmnpzmlbDmja7lrZjlnKgg5qC85byP5YyW6Lev55SxCiAgICBpZiAoZGF0YSkgewogICAgICAvLyDmoLzlvI/ljJblpb3ot6/nlLEKICAgICAgdmFyIGZtdFJvdXRlcyA9IGZvcm1hdFJvdXRlcyhkYXRhKTsgLy8g5re75Yqg5YiwIHJvdXRlcgoKICAgICAgcm91dGVyLmFkZFJvdXRlcyhmbXRSb3V0ZXMpOyAvLyDlsIbmlbDmja7lrZjlhaUgVnVleAoKICAgICAgc3RvcmUuY29tbWl0KCdpbml0Um91dGVzJywgZm10Um91dGVzKTsgLy8g6L+e5o6lIFdlYlNvY2tldAoKICAgICAgc3RvcmUuZGlzcGF0Y2goJ2Nvbm5lY3QnKTsKICAgIH0KICB9KTsKfTsKZXhwb3J0IHZhciBmb3JtYXRSb3V0ZXMgPSBmdW5jdGlvbiBmb3JtYXRSb3V0ZXMocm91dGVzKSB7CiAgdmFyIGZtdFJvdXRlcyA9IFtdOwogIHJvdXRlcy5mb3JFYWNoKGZ1bmN0aW9uIChyb3V0ZXIpIHsKICAgIHZhciBwYXRoID0gcm91dGVyLnBhdGgsCiAgICAgICAgX2NvbXBvbmVudCA9IHJvdXRlci5jb21wb25lbnQsCiAgICAgICAgbmFtZSA9IHJvdXRlci5uYW1lLAogICAgICAgIGljb25DbHMgPSByb3V0ZXIuaWNvbkNscywKICAgICAgICBjaGlsZHJlbiA9IHJvdXRlci5jaGlsZHJlbjsgLy8g5aaC5p6c5pyJIGNoaWxkcmVuIOW5tuS4lOexu+Wei+aYr+aVsOe7hAoKICAgIGlmIChjaGlsZHJlbiAmJiBjaGlsZHJlbiBpbnN0YW5jZW9mIEFycmF5KSB7CiAgICAgIC8vIOmAkuW9kgogICAgICBjaGlsZHJlbiA9IGZvcm1hdFJvdXRlcyhjaGlsZHJlbik7CiAgICB9IC8vIOWNleeLrOWvueafkOS4gOS4qui3r+eUseagvOW8j+WMliBjb21wb25lbnQKCgogICAgdmFyIGZtUm91dGVyID0gewogICAgICBwYXRoOiBwYXRoLAogICAgICBuYW1lOiBuYW1lLAogICAgICBpY29uQ2xzOiBpY29uQ2xzLAogICAgICBjaGlsZHJlbjogY2hpbGRyZW4sCiAgICAgIGNvbXBvbmVudDogZnVuY3Rpb24gY29tcG9uZW50KHJlc29sdmUpIHsKICAgICAgICAvLyDliKTmlq3nu4Tku7bku6Xku4DkuYjlvIDlpLTvvIzliLDlr7nlupTnmoTnm67lvZXljrvmib4KICAgICAgICBpZiAoX2NvbXBvbmVudC5zdGFydHNXaXRoKCdIb21lJykpIHsKICAgICAgICAgIHJlcXVpcmUoWydAL3ZpZXdzLycgKyBfY29tcG9uZW50ICsgJy52dWUnXSwgcmVzb2x2ZSk7CiAgICAgICAgfSBlbHNlIGlmIChfY29tcG9uZW50LnN0YXJ0c1dpdGgoJ0VtcCcpKSB7CiAgICAgICAgICByZXF1aXJlKFsnQC92aWV3cy9lbXAvJyArIF9jb21wb25lbnQgKyAnLnZ1ZSddLCByZXNvbHZlKTsKICAgICAgICB9IGVsc2UgaWYgKF9jb21wb25lbnQuc3RhcnRzV2l0aCgnUGVyJykpIHsKICAgICAgICAgIHJlcXVpcmUoWydAL3ZpZXdzL3Blci8nICsgX2NvbXBvbmVudCArICcudnVlJ10sIHJlc29sdmUpOwogICAgICAgIH0gZWxzZSBpZiAoX2NvbXBvbmVudC5zdGFydHNXaXRoKCdTYWwnKSkgewogICAgICAgICAgcmVxdWlyZShbJ0Avdmlld3Mvc2FsLycgKyBfY29tcG9uZW50ICsgJy52dWUnXSwgcmVzb2x2ZSk7CiAgICAgICAgfSBlbHNlIGlmIChfY29tcG9uZW50LnN0YXJ0c1dpdGgoJ1N0YScpKSB7CiAgICAgICAgICByZXF1aXJlKFsnQC92aWV3cy9zdGEvJyArIF9jb21wb25lbnQgKyAnLnZ1ZSddLCByZXNvbHZlKTsKICAgICAgICB9IGVsc2UgaWYgKF9jb21wb25lbnQuc3RhcnRzV2l0aCgnU3lzJykpIHsKICAgICAgICAgIHJlcXVpcmUoWydAL3ZpZXdzL3N5cy8nICsgX2NvbXBvbmVudCArICcudnVlJ10sIHJlc29sdmUpOwogICAgICAgIH0KICAgICAgfQogICAgfTsKICAgIGZtdFJvdXRlcy5wdXNoKGZtUm91dGVyKTsKICB9KTsKICByZXR1cm4gZm10Um91dGVzOwp9Ow=="},{"version":3,"sources":["D:/广理学习/JAVA框架项目/乐字节-云E办/乐字节-云E办前端/yeb/src/utils/menus.js"],"names":["getRequest","initMenu","router","store","state","routes","length","then","data","fmtRoutes","formatRoutes","addRoutes","commit","dispatch","forEach","path","component","name","iconCls","children","Array","fmRouter","resolve","startsWith","require","push"],"mappings":"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","sourcesContent":["import {getRequest} from \"@/utils/api\";\n\n// 菜单请求工具类\n\n// router 路由； store Vuex\nexport const initMenu = (router, store) => {\n    // 如果有数据，初始化路由菜单\n    if (store.state.routes.length > 0) {\n        return;\n    }\n\n    getRequest('/system/config/menu').then(data => {\n        // 如果数据存在 格式化路由\n        if (data) {\n            // 格式化好路由\n            let fmtRoutes = formatRoutes(data)\n            // 添加到 router\n            router.addRoutes(fmtRoutes)\n            // 将数据存入 Vuex\n            store.commit('initRoutes',fmtRoutes)\n            // 连接 WebSocket\n            store.dispatch('connect')\n        }\n    })\n}\n\nexport const formatRoutes = (routes) => {\n    let fmtRoutes = []\n    routes.forEach(router => {\n        let {\n            path,\n            component,\n            name,\n            iconCls,\n            children\n        } = router;\n        // 如果有 children 并且类型是数组\n        if (children && children instanceof Array) {\n            // 递归\n            children = formatRoutes(children)\n        }\n        // 单独对某一个路由格式化 component\n        let fmRouter = {\n            path: path,\n            name: name,\n            iconCls: iconCls,\n            children: children,\n            component(resolve) {\n                // 判断组件以什么开头，到对应的目录去找\n                if (component.startsWith('Home')) {\n                    require(['@/views/' + component + '.vue'], resolve);\n                }else if (component.startsWith('Emp')) {\n                    require(['@/views/emp/' + component + '.vue'], resolve);\n                }else if (component.startsWith('Per')) {\n                    require(['@/views/per/' + component + '.vue'], resolve);\n                }else if (component.startsWith('Sal')) {\n                    require(['@/views/sal/' + component + '.vue'], resolve);\n                }else if (component.startsWith('Sta')) {\n                    require(['@/views/sta/' + component + '.vue'], resolve);\n                }else if (component.startsWith('Sys')) {\n                    require(['@/views/sys/' + component + '.vue'], resolve);\n                }\n            }\n        }\n        fmtRoutes.push(fmRouter)\n    })\n    return fmtRoutes\n}\n"]}]}